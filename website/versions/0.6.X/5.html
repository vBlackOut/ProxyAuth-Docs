<!DOCTYPE html>
<!--[if IE 9]> <html class="no-js ie9 fixed-layout" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js " lang="en"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <!-- Basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- Site Metas -->
    <title>ProxyAuth | Documentation</title>
    <meta name="keywords" content="proxy, security, token, documentation, proxyauth">
    <meta name="description" content="Official Documentation for ProxyAuth.">
    <meta name="author" content="vBlackOut">

    <!-- Material Design fonts -->
    <link href="../../static/css.css" rel="stylesheet">
    <link rel="stylesheet" href="../../static/icon.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../../static/bootstrap.css">
    <link rel="stylesheet" href="../../static/bootstrap-material-design.css">
    <link rel="stylesheet" href="../../static/ripples.min.css">
    <link rel="stylesheet" href="../../static/font-awesome.min.css">

    <!-- Site CSS -->
    <link rel="stylesheet" href="../../static/style.css">
    <!-- Colors CSS -->
    <link rel="stylesheet" href="../../static/colors.css">

    <!-- Venobox CSS -->
    <link rel="stylesheet" href="../../static/venobox.css">
    <!-- Code Snippet CSS -->
    <link href="../../static/shCore.css" rel="stylesheet">
    <link href="../../static/shThemeDefault.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>

<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#4A90E2',
        primaryBorderColor: '#357ABD',
        primaryTextColor: '#ffffff',
        lineColor: '#4A90E2',
        background: '#E6F0FA',
        textColor: '#1A1A1A',
        nodeTextColor: '#ffffff',
        clusterBkg: '#B3D4FC',
        clusterBorder: '#357ABD'
      }
    });
  </script>
</head>
<body class="doc_wrapper">

    <!-- LOADER -->
    <div id="preloader" style="display: none;">
        <img class="preloader" src="../../static/loader.gif" alt="" style="display: none;">
    </div><!-- end loader -->
    <!-- END LOADER -->

    <div id="wrapper">


        <aside id="sideBar">

            <ul class="main-nav">
                <!-- Your Logo Or Site Name -->
                <li class="nav-brand">
                    <a href="/"> ProxyAuth <span id="version-display"></span><small>Proxy Authenticate Token</small></a>
                </li>

                <select id="version-select">
                  <option value="">-- Choose a version --</option>
                    <option value="0.6.X/5.html">v0.6.5</option>
                    <option value="0.6.X/4.html">v0.6.4</option>
                    <option value="0.6.X/3.html">v0.6.3</option>
                    <option value="0.6.X/0.html">v0.6.0</option>
                    <option value="0.5.X">v0.5.X</option>
                </select><br>

                <!-- Search -->
                <li>
                    <a href="#section_01" class="btn btn-raised btn-primary"> Getting Started</a>
                </li>
                <li>
                    <a href="#section_02" class="btn btn-raised btn-primary"> Build/install/uninstall</a>
                </li>
                <li>
                    <a href="#section_12" class="btn btn-raised btn-primary"> CLI command </a>
                </li>
                <li>
                    <a href="#section_03" class="btn btn-raised btn-primary"> Configuration</a>
                </li>
                <li>
                    <a href="#section_04" class="btn btn-raised btn-primary"> Credential route</a>
                </li>
                <li>
                    <a href="#section_05" class="btn btn-raised btn-primary"> Forward Route</a>
                </li>
                <li>
                    <a href="#section_06" class="btn btn-raised btn-primary"> Forward Route via other proxy</a>
                </li>
                <li>
                    <a href="#section_07" class="btn btn-raised btn-primary"> Forward on HTTPS certificate</a>
                </li>
                <li>
                    <a href="#section_08" class="btn btn-raised btn-primary"> Logs via Loki</a>
                </li>
                <li>
                    <a href="/stats/" class="btn btn-raised btn-primary"> Stats Downloads</a>
                </li>
                <li>
                    <a href="#section_09" class="btn btn-raised btn-primary"> Changelog</a>
                </li>
                <li>
                    <a href="#section_10" class="btn btn-raised btn-primary"> Dependancies Libs</a>
                </li>
                <li>
                    <a href="https://proxyauth.app/benchmark/index.html" target="_blank" class="btn btn-raised btn-primary"> Benchmark</a>
                </li>
                <li>
                    <a href="https://github.com/vBlackOut/ProxyAuth-Docs" class="btn btn-raised btn-primary"> Docs Contribution ‚ù§Ô∏è</a>
                </li>
            </ul>

        </aside>

        <section id="section_00" class="section wb">
            <div class="container-fluid">
                <div class="page-title text-center">
                    <h1>ProxyAuth</h1>
                    <ul class="breadcrumb">
                        <li class="active">Lastest version 0.6.5</li>
                        <li class="active">License: Apache 2.0</li>
                        <li class="active">Author: Vladimir SOUCHET (vBlackOut)</li>
                    </ul>

                    <ul class="breadcrumb">
                      <li class="active"> <a href="https://github.com/vBlackOut/ProxyAuth" target="_blank"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/></svg> Github</a></li>
                      <li><a href="https://crates.io/crates/proxyauth">Crates.io</a></li>
                      <li><a href="#section_09">Changelog</a></li>
                    </ul>

                </div><!-- end title -->
            </div><!-- end container -->
        </section><!-- end section -->

        <section id="section_01" class="section wb">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-title">
                            <h3>Getting Started</h3>
                            <hr>
                        </div><!-- end title -->
                    </div>
                </div><!-- end row -->

                <div class="row">
                    <div class="col-md-7">
                        <div class="contact-widget">
                            <p><b>ProxyAuth secures backend APIs</b> through a fast authentication gateway. It encrypts tokens using <b>ChaCha20 + HMAC-SHA256</b>, with config-defined secrets. It features built-in rate limiting (on proxy and auth routes) and uses Argon2 with auto-generated salts for secure password hashing. The service is extremely fast, handling 100,000+ requests per second under load.</p>

                            Motivation
                            <ol>
                                <li>ProxyAuth to improve the <b>security of your tokens</b>.</li>
                                <li><b>Accelerate your backend API development</b> and gain better security insights with ProxyAuth.</li>
                                <li>ProxyAuth performs <b>ultra-fast token verification.</b> üöÄ</li>
                                <li>ProxyAuth is written in <b>Rust</b>! ü¶Ä</li>
                                <li>You‚Äôve got <b>24 hours</b> to crack a token. Good luck!<br>
                                <b>ProxyAuth</b> is insanely secure after <b>24 hours</b>, the token is permanently invalid.</li>
                            </ol>
                        </div><!-- end contact-widget -->
                    </div><!-- end col -->

                    <div class="col-md-5">
                        <img src="../../static/logo.jpg" alt="" class="img-responsive">
                        <a href="../../static/images/SMALL_DIAGRAM.png" target="_blank"><img src="../../static/images/SMALL_DIAGRAM.png" alt="" class="img-responsive"></a>
                        <center><small>This is a simplified diagram. It might not be fully accurate, but it represents the general idea.</small></center>
                    </div><!-- end col -->
                </div><!-- end row -->
            </div><!-- end container -->
        </section><!-- end section -->

        <section id="section_02" class="section wb">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-title">
                            <h3>Build/Install</h3>
                            <hr>
                        </div><!-- end title -->
                    </div>
                </div><!-- end row -->

                <div class="row">
                    <div class="col-md-12">

                      <div class="alert alert-dismissible alert-danger-red">
                          <h4>‚ö†Ô∏è Danger</h4>
                          <p>To ensure better security, I cannot deliver the container, as ProxyAuth generates the cryptographic secret randomly during the build.<br>Building it yourself is very important. (Do not run any container pulled from Docker Hub, Bitbucket, or any other public cloud).</p>
                      </div>

                          <h4><b>Auto Build/Install via curl (build/install and create the configuration)</b></h4>
                          <div class="lines">
                              <div class="line alt1">
                                <code><span class="comment"> // latest version</span></code>
                              </div>
                              <div class="line alt1">
                                <code><span class="number">$</span>curl -fsSL https://proxyauth.app/sh/install | bash</code>
                              </div>
                              <div class="line alt1 p1">
                                <code><span class="comment"> // automaticaly launch proxyauth show status on systemd</span></code>
                              </div>
                              <div class="line alt1">
                                <code><span class="number">$</span>sudo systemctl status proxyauth</code>
                              </div>
                              <div class="line alt1 p1">
                                <code><span class="comment"> // use a specific version with @x.x.x (must be >= 0.5.6) versions lower than 0.5.6 are not supported.</span></code>
                              </div>
                              <div class="line alt1">
                                <code><span class="number">$</span>curl -fsSL https://proxyauth.app/sh/install@0.5.10 | bash</code>
                              </div>
                          </div>
                          <br>

                          <h4><b>Use Docker (you don't need to install rust on your local machine)</b></h4>
                          <div class="lines">
                              <div class="line alt1">
                                <code><span class="comment"> // clone the project</span></code>
                              </div>
                              <div class="line alt1">
                                <code><span class="number">$</span>git clone https://github.com/vBlackOut/ProxyAuth && cd ProxyAuth/</code>
                              </div>
                              <div class="line alt1 p1">
                                <code><span class="comment"> // build & launch proxyauth inside docker container</span></code>
                              </div>
                              <div class="line alt1">
                                <code><span class="number">$</span>docker compose build && docker compose up -d</code>
                              </div>
                          </div>

                    </div><!-- end col -->
                </div><!-- end row -->
            </div><!-- end container -->
        </section><!-- end section -->

        <section id="section_11" class="section wb">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-title">
                            <h3>Uninstall</h3>
                            <hr>
                        </div><!-- end title -->
                    </div>
                </div><!-- end row -->

                <div class="row">
                    <div class="col-md-12">

                          <h4><b>Uninstall all file ProxyAuth, User/config ect...</b></h4>
                          <div class="lines">
                              <div class="line alt1">
                                <code><span class="number">$</span>curl -fsSL https://proxyauth.app/sh/uninstall | bash</code>
                              </div>
                          </div>

                    </div><!-- end col -->
                </div><!-- end row -->
            </div><!-- end container -->
        </section><!-- end section -->

        <section id="section_12" class="section wb">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-title">
                            <h3>CLI command</h3>
                            <hr>
                        </div><!-- end title -->
                    </div>
                </div><!-- end row -->

                <div class="row">
                    <div class="col-md-12">

                          <h4><b>proxyauth stats</b></h4>
                          <div class="alert alert-dismissible alert-danger">
                            <h4>Notice</h4>
                            <p> The token ID isn't the real token, it's just a way to reference it. <br>
                                The real token is private and securely handled ‚Äî it is never stored.</p>
                        </div>
                          Used to display token usage statistics. In previous versions, it was possible to revoke a specific token ID.<br>
                          Example: The user "<b>admin</b>" has used the token ID "<b>AVzjugA=yY!$#...</b>" a total of <b>2 times</b>.<br>
                          <img src="../../static/images/proxy_auth_stats.png"><br><br>

                          <h4><b>curl give stats</b></h4>
                          The admin token is in <b>/etc/proxyauth/config/config.json</b> (automatically created at launch).<br>
                          <div class="lines">
                              <div class="line alt1">
                                <code><span class="comment"> // show stats</span></code>
                              </div>
                              <div class="line alt1">
                                <code><span class="number">$</span>curl -k -H 'X-Auth-Token: [YOUR_TOKEN_ADMIN]' https://127.0.0.1:8080/adm/stats</code>
                              </div>
                              <div class="line alt1">
                                <code><span class="number">response</span><pre>[
  {
    "user": "admin",
    "tokens": [
      {
        "token_id": "AVzjugA=yY!...",
        "count": 2
      }
    ]
  }
]</pre></code>
                              </div>
                          </div>


                    </div><!-- end col -->
                </div><!-- end row -->
            </div><!-- end container -->
        </section><!-- end section -->

        <section id="section_03" class="section wb">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-title">
                            <h3>Configuration</h3>
                            <hr>
                        </div><!-- end title -->
                    </div>
                </div><!-- end row -->

              <div class="row">
                  <div class="col-md-12">

                        <div class="alert alert-dismissible alert-danger">
                            <h4>Notice</h4>
                            <p>Configuration Path: ProxyAuth stores its configuration in <b>/etc/proxyauth/config/</b> (version >= 0.5.6) <br><b><a href="#section_02">Please install via (curl or docker)</a></b></p>
                        </div>
                        <br>
                        <h3><b>File config.json</b></h3>
                        Complete file: <b>/etc/proxyauth/config/config.json</b>
                        <div style="background: #2d2d2d; color: #ccc; font-family: monospace; width: 100%;">
                        <pre id="json-block" style="tab-size: 2; -moz-tab-size: 2; margin: 0; padding: 1em; text-align: left; white-space: pre-wrap; word-break: break-word; width: 100%;">
<code>{
  "token_expiry_seconds": 3600,
  "secret": "supersecretvalue",
  "host": "0.0.0.0",
  "port": 8080,
  "worker": 4,
  "log": {"type": "local"},
  "stats: true,
  "ratelimit_auth": {
    "burst": 10,
    "block_delay": 500,
    "requests_per_second": 10
  },
  "ratelimit_proxy": {
    "burst": 10,
    "block_delay": 500,
    "requests_per_second": 10
  },
  "users": [
    {
      "username": "admin",
      "password": "$argon2id$v=19$m=19456,t=2..."
    },
    {
      "username": "alice",
      "password": "$argon2id$v=19$m=19456,t=2..."
    }
  ]
}</code></pre></div>

                   <div class="doc">
                        <div class="row">
                            <div class="col-lg-4">
                                <h2>Options Documentation</h2>
                            </div>
                            <div class="col-lg-3">
                                <span class="label label-danger badge-pill" style="position: relative;top: 20px;font-size: 15px;left: -45px;">* All is Required.</span>
                            </div>
                        </div>
                        <details open>
                            <summary>token_expiry_seconds</summary>
                            <div class="option">1-86400 (Max 1 Day)</div>
                            <div class="option"><small><b>Note: Every day at 12:00 AM, tokens are invalidated and recalculated.<br> This ensures secure access throughout the day.</b></small></div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>3600</code>
                            </div>

                        </details>
                        <details open>
                            <summary>secret</summary>
                            <div class="option">Please generate a secure token (64 characters or more!)</div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>unset</code>
                            </div>
                        </details>
                        <details open>
                            <summary>host</summary>
                            <div class="option">IP address where the server listens</div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>0.0.0.0</code>
                            </div>
                        </details>
                        <details open>
                            <summary>port</summary>
                            <div class="option">Valid range: 1‚Äì65535</div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>8080</code>
                            </div>
                        </details>
                        <details open>
                            <summary>worker</summary>
                            <div class="option">Number of CPUs available</div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>4</code>
                            </div>
                        </details>
                        <details open>
                            <summary>log</summary>
                            <div class="option">type: <code>local</code> ‚Üí do not use remote logging</div>
                            <div class="option">type: <code>loki</code> ‚Üí use Loki logging <code>{"type": "loki", "host": "127.0.0.1:1234"}</code></div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>local</code>
                            </div>
                        </details>
                         <details open>
                            <summary>stats</summary>
                            <div class="option">boolean: <code>true/false</code> ‚Üí do not use remote stats /adm/stats or proxyauth stats</div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>false</code>
                            </div>
                        </details>
                        <details open>
                            <summary>ratelimit_auth</summary>
                            <div class="option">
                                <strong>request_per_seconds:</strong> <code>0</code> for disable the rate limit, Maximum number of authentication requests allowed per second from a single client.
                            </div>
                            <div class="option">
                                <strong>burst:</strong> Number of extra requests allowed beyond the per-second rate before blocking is enforced.
                            </div>
                            <div class="option">
                                <strong>block_delay:</strong> Time a client must wait (after exceeding limits) before sending new authentication
                            </div>

                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>Disabled</code>
                            </div>
                        </details>
                        <details open>
                            <summary>ratelimit_proxy</summary>
                            <div class="option">
                                <strong>request_per_seconds:</strong> <code>0</code> for disable the rate limit, Maximum number of forward proxy requests allowed per second from a single client.
                            </div>
                            <div class="option">
                                <strong>burst:</strong> Number of extra requests allowed beyond the per-second rate before blocking is enforced.
                            </div>
                            <div class="option">
                                <strong>block_delay:</strong> Time a client must wait (after exceeding limits) before sending forward request inside ProxyAuth
                            </div>

                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>Disabled</code>
                            </div>
                        </details>
                        <details open>
                            <summary>users</summary>
                            <div class="option">Array of user objects for authentication.</div>
                            <div class="option" style="margin-left: 1rem;">Key <code>username</code> username to use with the <code>/auth</code> route to obtain a token</div>
                            <div class="option" style="margin-left: 1rem;">Key <code>password</code> password to use with the <code>/auth</code> route to obtain a token</div>
                        </details>
                    </div><br><br>

                    <h3><b>File routes.yml</b></h3>
                    Complete file: <b>/etc/proxyauth/config/routes.yml</b>
                    <div style="background: #2d2d2d; color: #ccc; font-family: monospace; width: 100%;">
                        <pre id="json-block" style="tab-size: 2; -moz-tab-size: 2; margin: 0; padding: 1em; text-align: left; white-space: pre-wrap; word-break: break-word; width: 100%;">
<code>routes:
  - prefix: "/redoc"
    target: "http://127.0.0.1:8000/redoc"
    secure: false

  - prefix: "/api_test/openapi.json"
    target: "http://localhost:8000/api_test/openapi.json"
    secure: false

  - prefix: "/api_test_default"
    target: "http://localhost:8000/api_test_default"
    username: ["admin", "alice1", "alice15", "alice30"]

  - prefix: "/api_test_proxy"
    target: "http://localhost:8000/api_test_proxy"
    username: ["admin", "alice1", "alice15", "alice30"]
    proxy: true
    proxy_config: "http://127.0.0.1:8888"

  - prefix: "/api_test_cert"
    target: "https://localhost:8000/api_test_cert"
    username: ["admin", "alice1", "alice15", "alice30"]
    cert: {"file": "certificat.p12", "password": "1234"}</code></pre></div>


                    <div class="doc">
                        <h2>Options Documentation</h2>

                        <details open>
                            <summary><strong>prefix</strong> <span class="label label-danger badge-pill">* Required</span></summary>
                            <div class="option">Defines the URL prefix to use when forwarding the original request to the target service.</div>
                        </details>

                        <details open>
                            <summary><strong>target</strong> <span class="label label-danger badge-pill">* Required</span></summary>
                            <div class="option">Specifies the destination URL or service that will receive the forwarded request.</div>
                            <div class="option" style="margin-left: 1rem;color:red;">
                            </div>
                        </details>

                        <details open>
                            <summary><strong>username</strong></summary>
                            <div class="option">A list of allowed usernames authorized to access this route.</div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>unset</code>.
                            </div>
                        </details>
                        <details open>
                            <summary><strong>secure</strong></summary>
                            <div class="option">
                                Determines whether the route requires authentication.<br>
                                Set the <code>secure</code> key to <code>true</code> to require a token, or <code>false</code> to disable authentication.
                            </div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>true</code>
                            </div>
                        </details>
                        <details open>
                            <summary><strong>proxy</strong></summary>
                            <div class="option">Enable or disable proxy forwarding. <br>
                                Use <code>true</code> to need token for access this resource, <code>false</code> to no token need for access this route by <br>
                            </div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>false</code>.
                            </div>
                        </details>
                        <details open>
                            <summary><strong>proxy_config</strong></summary>
                            <div class="option">Configuration object for the proxy destination.</div>
                            <div class="option" style="margin-left: 1rem;">Key <code>host</code> [IP:PORT] or hostname of the proxy target.</div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>unset</code>.
                            </div>
                        </details>
                        <details open>
                            <summary><strong>cert</strong> <span class="label label-danger badge-pill"><i>* Experimental</i></span></summary>
                            <div class="option">SSL/TLS certificate configuration:</div>
                            <div class="option" style="margin-left: 1rem;">Key <code>file</code> Path to the certificate file (e.g., <code>certificate.p12</code>).</div>
                            <div class="option" style="margin-left: 1rem;">Key <code>password</code> Password used to unlock the certificate.</div>
                            <div class="option" style="margin-left: 1rem;">
                                <strong>Default:</strong> <code>unset</code>.
                            </div>
                        </details>
                    </div>


                  </div><!-- end col -->
              </div><!-- end row -->
          </div><!-- end container -->
      </section><!-- end section -->

      <section id="section_04" class="section wb">
          <div class="container-fluid">
              <div class="row">
                  <div class="col-md-12">
                      <div class="section-title-nocap">
                          <h3>Credential Route</h3>
                          <p>ProxyAuth authenticate route for give token.</p>

                          <b>METHOD</b> POST<br>
                          <b>URL</b> [host:port]/auth<br>
                          <b>HEADER</b> Content-Type: application/json<br>
                          <b>PARAMS</b> { "username": &lt;string&gt;, "password": &lt;string&gt; }<br>
                          <ol>
                            <li>Rate limiting can be configured here via the <b>ratelimit</b> field in <b>config.json</b>."</li>
                          </ol>


                          <div class="dropdown">
                            <div class="header-dropdown">
                              <span class="text">SHOW EXEMPLE</span>
                              <span class="arrow">‚ñ∂</span>
                            </div>
                            <div class="content">

                              <!-- Tabs inside the dropdown -->
                              <ul class="nav nav-tabs">
                                <li class="active"><a data-toggle="tab" href="#tab1">cURL Exemple</a></li>
                                <li><a data-toggle="tab" href="#tab2">Response</a></li>
                                <li><a data-toggle="tab" href="#tab3">Response Ratelimit</a></li>
                              </ul>

                              <div class="tab-content" style="margin-top:10px;">
                                <div id="tab1" class="tab-pane fade in active">
                                  <div class="lines">
                                      <div class="line alt1">
                                        <code><span class="comment">// default login is admin and admin123 change this in config.json</span></code>
                                      </div>
                                      <div class="line alt1">
                                        <code><span class="number">$</span>curl -k -X POST https://127.0.0.1:8080/auth -H "Content-Type: application/json" -d '{"username": "admin", "password": "admin123"}'</code>
                                      </div>
                                  </div>
                                </div>
                                <div id="tab2" class="tab-pane fade">
                                  <div class="lines">
                                    <div class="line alt1">
                                      <code><span class="comment">// Header</span></code>
                                    </div>
                                      <div class="line alt1">
                                        <code>HTTP/1.1 200 OK</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>content-length: 191</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>x-ratelimit-remaining: 4</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>x-ratelimit-limit: 5</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>content-type: application/json</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>date: Sun, 27 Apr 2025 07:29:21 GMT</code>
                                      </div>
                                      <div class="line alt1 p1">
                                        <code><span class="comment">// Response body</span></code>
                                      </div>
                                      <div class="line alt1">
                                        <code>{"expires_at":"2025-04-27 09:37:05","token":"85l19fN5l+DKozxk29xeMtw2PgH/aNnVAgEJLxNo8M7xsumcO1cxS1BsfsUQIg+EXdV1vpxQMSNpiPPymBvfGUx2ufPT1jK7JVT9Aw3amQTOs5k8oBs+Qh6EbKHJsyohcioACLP9MWQ/DHhb"}</code>
                                      </div>
                                  </div>
                                </div>

                                <div id="tab3" class="tab-pane fade">
                                  <div class="lines">
                                    <div class="line alt1">
                                      <code><span class="comment">// Header</span></code>
                                    </div>
                                      <div class="line alt1">
                                        <code>HTTP/1.1 429 Too Many Requests</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>content-length: 30</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>x-ratelimit-remaining: 0</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>x-ratelimit-limit: 5</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>x-ratelimit-after: 6</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>retry-after: 6</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>content-type: text/plain; charset=utf-8</code>
                                      </div>
                                      <div class="line alt1">
                                        <code>date: Sun, 27 Apr 2025 07:29:21 GMT</code>
                                      </div>
                                      <div class="line alt1 p1">
                                        <code><span class="comment">// Response body</span></code>
                                      </div>
                                      <div class="line alt1">
                                        <code>Too many requests, retry in 6s</code>
                                      </div>
                                  </div>
                                </div>
                              </div>


                            </div>
                          </div>
                          <hr>
                      </div><!-- end title -->
                  </div>
              </div><!-- end row -->

            <div class="row">
                <div class="col-md-12">

                  Send <b>Login</b>/<b>password</b> for give token<br>
                  This route returns an expiration date and a different token on each call.<br>
                  <div class="mermaid">
                    sequenceDiagram
                        autonumber
                        participant C as Client
                        participant P as ProxyAuth

                        C->>+P: POST https://[host:port]/auth<br>-H "Content-Type: application/json"<br>-d {"username": "user", "password": "pass"}
                        P->>+P: Check credential
                        P->>+C: return json format <br>{"expires_at":"2025-04-12 16:15:20","token":"4GJeCUwOzILd..."}
                  </div>
                </div><!-- end col -->
            </div><!-- end row -->
        </div><!-- end container -->
    </section><!-- end section -->

    <section id="section_05" class="section wb">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <div class="section-title-nocap">
                        <h3>Forward Route</h3>
                        <p>ProxyAuth forwards your original request to the target after validating the token.</p>

                        <b>METHOD</b> ALL<br>
                        <b>URL</b> https://[host:port]/[prefix]<br>
                        <b>HEADER</b> "Authorization: Bearer &lt;your_token&gt;"<br>

                        <ol>
                          <li>If the <b>secure</b> option is set to <b>true</b> in your <b>routes.yml</b> configuration, then the route will be secured<br></li>
                          <li>Rate limiting can be configured here via the <b>ratelimit</b> field in <b>config.json</b>."</li>
                        </ol>

                        <div class="dropdown">
                          <div class="header-dropdown">
                            <span class="text">SHOW EXEMPLE</span>
                            <span class="arrow">‚ñ∂</span>
                          </div>
                          <div class="content">
                            <div class="lines">
                                <div class="line alt1">
                                  <code><span class="comment">// use route in routes.yml</span></code>
                                </div>
                                <div class="line alt1">
                                  <code><span class="number">$</span>curl -X GET http://127.0.0.1:8080/api_test -H "Authorization: Bearer YOUR_TOKEN_HERE"</code>
                                </div>
                            </div>
                          </div>
                        </div>
                        <hr>
                    </div><!-- end title -->
                </div>
            </div><!-- end row -->

          <div class="row">
              <div class="col-md-12">

                <b>Scenario 1</b> send a valid token.<br>
                <div class="mermaid">
                  sequenceDiagram
                      autonumber
                      participant C as Client
                      participant P as ProxyAuth
                      participant A as API/Service

                      C->>+P: Send token Header <br> -X POST https://[host:port]/api -H "Content-Type: application/json" <br>-H "Authorization: Bearer UmbC0ZgATdXE..." -d {"data": "test"}
                      P->>+P: Check token send by client
                      P->>+A: Forward original request <br> POST http://[host_target]/api_test <br>-H "Content-Type: application/json" <br>-d {"data": "test"}
                      A-->>-P: Response
                      P-->>-C: Response
                </div>
                <br><br>
                <b>Scenario 2</b> send a invalid token/expired.<br>

                <div class="mermaid">
                  sequenceDiagram
                      autonumber
                      participant C as Client
                      participant P as ProxyAuth
                      participant E as API/Service

                      C->>+P: Send token Header<br> -H "Authorization: Bearer UmbC0ZgATdXE..."
                      P->>+P: Check token send by client
                      P-->>-C: Invalid Token
                      Note over E: No external request made
                </div>


              </div><!-- end col -->
          </div><!-- end row -->
      </div><!-- end container -->
  </section><!-- end section -->

          <section id="section_06" class="section wb">
              <div class="container-fluid">
                  <div class="row">
                      <div class="col-md-12">
                          <div class="section-title">
                              <h3>Forward route via other proxy</h3>
                              <hr>
                          </div><!-- end title -->
                      </div>
                  </div><!-- end row -->

                <div class="row">
                    <div class="col-md-12">
                          <div class="alert alert-dismissible alert-danger">
                              <h4>Notice</h4>
                              <p>ProxyAuth allows you to forward your request through another proxy to access your target destination.</p>
                          </div>
                          <br>
                          <div class="mermaid">
                            sequenceDiagram
                                autonumber
                                participant C as Client
                                participant P as ProxyAuth
                                participant P2 as Other Proxy
                                participant A as API/Service

                                C->>+P: Send token Header <br> -X POST https://[host:port]/api -H "Content-Type: application/json" <br>-H "Authorization: Bearer UmbC0ZgATdXE..." -d {"data": "test"}
                                P->>+P: Check token send by client
                                P->>+P2: Forward original request <br> POST http://[host_target]/api_test <br>-H "Content-Type: application/json" <br>-d {"data": "test"}
                                P2-->>+A: Forward
                                A->>-P2: Response
                                P2->>P: Response
                                P-->>-C: Response
                          </div>
                    </div><!-- end col -->
                </div><!-- end row -->
            </div><!-- end container -->
        </section><!-- end section -->

        <section id="section_07" class="section wb">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-title">
                            <h3>Forward on HTTPS certificate</h3>
                            <hr>
                        </div><!-- end title -->
                    </div>
                </div><!-- end row -->

              <div class="row">
                  <div class="col-md-12">
                        <div class="alert alert-dismissible alert-danger">
                            <h4>‚ö†Ô∏è TESTING [<a href="https://github.com/vBlackOut/ProxyAuth/releases/tag/0.5.10">Version 0.5.10</a>]</h4>
                              <p>ProxyAuth enables forwarding of HTTPS requests in order to securely access a remote machine.</p>
                        </div>
                        <br>
                        <div class="mermaid">
                        sequenceDiagram
                            autonumber
                            participant C as Client
                            participant P as ProxyAuth
                            participant A as HTTPS/TLS<br> API/Service

                            C->>+P: Send token Header <br> -X POST https://[host:port]/api -H "Content-Type: application/json" <br>-H "Authorization: Bearer UmbC0ZgATdXE..." -d {"data": "test"}
                            P->>+P: Check token send by client
                            P->>+A: Forward original https over https request <br> POST https://[host_target]/api_test <br>-H "Content-Type: application/json" <br>-d {"data": "test"}
                            A-->>-P: Response
                            P-->>-C: Response
                        </div>
                  </div><!-- end col -->
              </div><!-- end row -->
          </div><!-- end container -->
      </section><!-- end section -->

      <section id="section_08" class="section wb">
          <div class="container-fluid">
              <div class="row">
                  <div class="col-md-12">
                      <div class="section-title">
                          <h3>Logs via Loki</h3>
                          <hr>
                      </div><!-- end title -->
                  </div>
              </div><!-- end row -->

            <div class="row">
                <div class="col-md-12">
                      <br>
                      Coming up...
                </div><!-- end col -->
            </div><!-- end row -->
        </div><!-- end container -->
    </section><!-- end section -->

        <section id="section_09" class="section wb">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-title">
                            <h3>Changelog <small><a href="#section_00">#back to top</a></small></h3>
                            <hr>
                        </div><!-- end title -->
                    </div>
                </div><!-- end row -->

                <div class="row">
                    <div class="col-md-12">

                        <p>You can find the version history (CHANGELOG.md)</p>
                        <hr>

                        <h4>Changelog</h4>

                        <div style="background: #2d2d2d; color: #ccc; font-family: monospace; overflow-x: auto; margin: auto;">
                          <pre style="margin: 0; line-height: 1.5;">

                        -----------------------------------------------------------------------------------------
                        Version 0.6.5
                        -----------------------------------------------------------------------------------------
                            [PERF] Complete rewrite of proxy architecture.
                            [DISABLED] Proxy forwarding via `routes.yml`.
                            [DISABLED] Certificate-based forwarding in `routes.yml` rules.
                            [WORKING] HTTPS forwarding if valid certificates are present.
                            [WORKING] Token validation: invalid/expired tokens are properly handled.
                            [WORKING] HTTP request forwarding is operational.
                            [WORKING] `User-Agent` header rewritten to `ProxyAuth`.
                            [WORKING] Disable/Enable/Redirect logs on loki/local
                            [WORKING] Disable/Enable stats on cmd proxyauth stats
                            [WORKING] Disable/Enable ratelimit over /auth or your rules routes...
                            [ULTRA FAST] Achieves ~ 600k HTTPS requests per second on server hardware.


                        -----------------------------------------------------------------------------------------
                        Version 0.6.1-0.6.3
                        -----------------------------------------------------------------------------------------
                            [TEST] Optimized Configuration.

                        -----------------------------------------------------------------------------------------
                        Version 0.6.0
                        -----------------------------------------------------------------------------------------
                            [ADD] H2 / use HTTPS only / generate certs in /etc/proxyauth/certs/

                        -----------------------------------------------------------------------------------------
                        Version 0.5.34
                        -----------------------------------------------------------------------------------------
                            [REBUILD] Rebuild all proxy conception.

                        -----------------------------------------------------------------------------------------
                        Version 0.5.28
                        -----------------------------------------------------------------------------------------
                            [BUGFIX] Load configuration ratelimit possible disable if key si unset or
                                     request_per_seconds is 0.

                        -----------------------------------------------------------------------------------------
                        Version 0.5.23-0.5.27
                        -----------------------------------------------------------------------------------------
                            [PERF] Improve performance ~ 1 Millions requests per seconds

                        -----------------------------------------------------------------------------------------
                        Version 0.5.22
                        -----------------------------------------------------------------------------------------
                            [Security] Rotate random params

                        -----------------------------------------------------------------------------------------
                        Version 0.5.21
                        -----------------------------------------------------------------------------------------
                            [Security] Better security hash token ID

                        -----------------------------------------------------------------------------------------
                        Version 0.5.20
                        -----------------------------------------------------------------------------------------
                            [Optimized] Better performance

                        -----------------------------------------------------------------------------------------
                        Version 0.5.19
                        -----------------------------------------------------------------------------------------
                            [FIX] ratelimit no detect configuration

                        -----------------------------------------------------------------------------------------
                        Version 0.5.17
                        -----------------------------------------------------------------------------------------
                            [FIX] FIX launch cmd proxyauth stats for user

                        -----------------------------------------------------------------------------------------
                        Version 0.5.15
                        -----------------------------------------------------------------------------------------
                            [FIX] cmd cli stats for routes /adm/stats

                        -----------------------------------------------------------------------------------------
                        Version 0.5.14
                        -----------------------------------------------------------------------------------------
                            [ADD] clear project /adm/stats

                        -----------------------------------------------------------------------------------------
                        Version 0.5.13
                        -----------------------------------------------------------------------------------------
                            [ADD] Route Admin /adm/stats

                        -----------------------------------------------------------------------------------------
                        Version 0.5.12
                        -----------------------------------------------------------------------------------------
                            [ADD] New CLI command `proxyauth stats` to display token usage statistics

                        -----------------------------------------------------------------------------------------
                        Version 0.5.11
                        -----------------------------------------------------------------------------------------
                            [ADD] Token usage stats per user

                        -----------------------------------------------------------------------------------------
                        Version 0.5.10
                        -----------------------------------------------------------------------------------------
                            [ADD] Improved rate limit configuration for proxy routes and the /auth authentication endpoint.

                        -----------------------------------------------------------------------------------------
                        Version 0.5.9
                        -----------------------------------------------------------------------------------------
                            [UPDATE] Launching Actix Web with rate limiting enabled.
                                     Available modes: NO_RATELIMIT_AUTH, NO_RATELIMIT_PROXY,
                                                      RATELIMIT_GLOBAL_ON, RATELIMIT_GLOBAL_OFF.

                        -----------------------------------------------------------------------------------------
                        Version 0.5.8
                        -----------------------------------------------------------------------------------------
                            [BUGFIX] Default launch now correctly uses HTTPS/TLS

                        -----------------------------------------------------------------------------------------
                        Version 0.5.7
                        -----------------------------------------------------------------------------------------
                            [FIX] Improved installation script
                            [ADD] Clearer explanation of rate limiting (wait time in milliseconds)

                        -----------------------------------------------------------------------------------------
                        Version 0.5.6
                        -----------------------------------------------------------------------------------------
                            [FIX] Better compatibility with Alpine and other Linux distributions

                        -----------------------------------------------------------------------------------------
                        Version 0.5.5
                        -----------------------------------------------------------------------------------------
                            [ADD] Introduced new 'prepare' command
                            [ADD] Program now launches as root and creates/uses the 'proxyauth' user to write in /etc/proxyauth
                            [TODO] Documentation is coming to explain this setup
                            [NOTE] First-time usage: run `sudo proxyauth prepare` before launching the app

                        -----------------------------------------------------------------------------------------
                        Version 0.5.4
                        -----------------------------------------------------------------------------------------
                            [ADD] create automatically the file configuration use github repo.

                        -----------------------------------------------------------------------------------------
                        Version 0.5.3
                        -----------------------------------------------------------------------------------------
                            [FIX] Replace host label with app to improve log display in Loki.

                        -----------------------------------------------------------------------------------------
                        Version 0.5.2
                        -----------------------------------------------------------------------------------------
                            [ADD] integration log for loki/Grafana.

                        -----------------------------------------------------------------------------------------
                        Version 0.5.0
                        -----------------------------------------------------------------------------------------
                            [ADD] Experimental feacture forward on https requests.


                        -----------------------------------------------------------------------------------------
                        Version 0.4.2
                        -----------------------------------------------------------------------------------------
                            [FIX] Minor bug over message proxy


                        -----------------------------------------------------------------------------------------
                        Version 0.4.1
                        -----------------------------------------------------------------------------------------
                            [ADD] possible config proxy on file routes.yml


                        -----------------------------------------------------------------------------------------
                        Version 0.4.0
                        -----------------------------------------------------------------------------------------
                            [ADD] ratelimit over routes /auth.
                            [ADD] use auto Argo2 for encrypt passsword in config.json

                        -----------------------------------------------------------------------------------------
                        Version 0.3.5
                        -----------------------------------------------------------------------------------------
                            [SECURITY] Improved security and re-checking of the factor if it exceeds the defined limit.
                            [SECURITY] Use of SHA-256 instead of SHA-1.
                            [SECURITY] Add HMAC SHA-256 over CHACHA20 AED

                        -----------------------------------------------------------------------------------------
                        Version 0.3.4
                        -----------------------------------------------------------------------------------------
                            [REFACTO] Moved the utils method into security.
                            [ADD] Enhanced hash security.

                        -----------------------------------------------------------------------------------------
                        Version 0.3.3
                        -----------------------------------------------------------------------------------------
                            [FIX] Bug with rate limiting when an anonymous user makes requests to unsecured routes (docs, etc.).
                            [ADD] Better logging / error handling when token encryption fails
                                  triggers a warning log message with the source IP.

                        -----------------------------------------------------------------------------------------
                        Version 0.3.2
                        -----------------------------------------------------------------------------------------
                            [ADD] Improved log messages.
                            [ADD] Applied rate limiting only on proxy routes and not on /refresh_token.
                            [ADD] ulimit setting in Docker configuration for better performance.

                        -----------------------------------------------------------------------------------------
                        Version 0.3.1
                        -----------------------------------------------------------------------------------------
                            [ADD] delay_block setting in the config file.

                        -----------------------------------------------------------------------------------------
                        Version 0.3.0
                        -----------------------------------------------------------------------------------------
                            [ADD] Rate limiting per request and per user.

                        -----------------------------------------------------------------------------------------
                        Version 0.2.1
                        -----------------------------------------------------------------------------------------
                            [FIX] Bug related to date handling.
                            [ADD] Added logging via tracing.

                        -----------------------------------------------------------------------------------------
                        Version 0.2.0
                        -----------------------------------------------------------------------------------------
                            Improved user check ‚Äî users are now checked via an index.
                            [BUG] Date checking issue still present.
                            Improved the /auth route algorithm.
                            Added Dockerfile and docker-compose.yml, built from rust:alpine.

                        -----------------------------------------------------------------------------------------
                        Version 0.1.0
                        -----------------------------------------------------------------------------------------
                            Implemented CHACHA20/SHA1/ROTATE algorithm for token handling.
                            Implemented request forwarding routes.
                            Added configuration files: routes.yml and config.json.
                            [BUG] Date checking issue to be fixed.
                            Added worker execution count handling.
                            [TODO] Improve user checking (ID inside chacha20)
                            (Performance improvement: no need to iterate through all users).
                          </pre>
                        </div>
                    </div>
                </div>
                <!-- end row -->

            </div><!-- end container -->
        </section><!-- end section -->


        <section id="section_10" class="section wb">
          <div class="container-fluid">
              <div class="row">
                  <div class="col-md-12">
                      <div class="section-title">
                          <h3>Dependancies Libs</h3>
                          <hr>
                      </div><!-- end title -->
                  </div>
              </div><!-- end row -->

            <div class="row">
                <div class="col-md-12">
                        <div id="dependencies">Chargement...</div>
                </div><!-- end col -->
            </div><!-- end row -->
        </div><!-- end container -->
    </section><!-- end section -->

    </div>
    <!-- end wrapper -->

    <script src="../../static/jquery.js"></script>
    <script src="../../static/bootstrap.js"></script>
    <script src="../../static/ripples.min.js"></script>
    <script src="../../static/material.min.js"></script>
    <script src="../../static/custom.js"></script>

    <script src="../../static/venobox.min.js"></script>
    <script src="../../static/jquery.fitvids.js"></script>
    <!-- Code Snippet JS -->
    <script type="text/javascript" src="../../static/shCore.js"></script>
    <script type="text/javascript" src="../../static/shBrushBash.js"></script>
    <script type="text/javascript" src="../../static/shBrushCpp.js"></script>
    <script type="text/javascript" src="../../static/shBrushCSharp.js"></script>
    <script type="text/javascript" src="../../static/shBrushCss.js"></script>
    <script type="text/javascript" src="../../static/shBrushDelphi.js"></script>
    <script type="text/javascript" src="../../static/shBrushDiff.js"></script>
    <script type="text/javascript" src="../../static/shBrushGroovy.js"></script>
    <script type="text/javascript" src="../../static/shBrushJava.js"></script>
    <script type="text/javascript" src="../../static/shBrushJScript.js"></script>
    <script type="text/javascript" src="../../static/shBrushPhp.js"></script>
    <script type="text/javascript" src="../../static/shBrushPlain.js"></script>
    <script type="text/javascript" src="../../static/shBrushPython.js"></script>
    <script type="text/javascript" src="../../static/shBrushRuby.js"></script>
    <script type="text/javascript" src="../../static/shBrushScala.js"></script>
    <script type="text/javascript" src="../../static/shBrushSql.js"></script>
    <script type="text/javascript" src="../../static/shBrushVb.js"></script>
    <script type="text/javascript" src="../../static/shBrushXml.js"></script>
    <script type="text/javascript" src="../../static/shCore.js"></script>
    <script type="text/javascript" src="../../static/shBrushJScript.js"></script>
    <script type="text/javascript" src="../../static/custom2.js"></script>

</body></html>
